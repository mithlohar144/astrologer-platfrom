<html>
  <head>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&amp;family=Inter%3Awght%40400%3B500%3B700%3B900&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900"
    />

    <title>Stitch Design</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <!-- Project CSS/JS to match existing dashboard design -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="js/navbar-utils.js"></script>
    <script src="js/config.js"></script>

    <style>
      /* Hide this page's old Tailwind header to use unified sidebar */
      .group\/design-root > .layout-container > header { display: none !important; }

      /* Modern sidebar design */
      .dashboard-layout { display: flex; gap: 0; padding: 0; max-width: none; margin: 0; min-height: 100vh; background: #f5f7fa; }
      .sidebar { width: 280px; background: #ffffff; border: none; border-radius: 0; box-shadow: 2px 0 10px rgba(0,0,0,0.05); padding: 0; height: 100vh; position: fixed; top: 0; left: 0; z-index: 1000; border-right: 1px solid #e5e7eb; }
      .sidebar .user-block { padding: 2rem 1.5rem; border-bottom: 1px solid #e5e7eb; text-align: left; }
      .sidebar .avatar { width: 48px; height: 48px; border-radius: 50%; background: #e0e7ff; display: flex; align-items: center; justify-content: center; font-weight: 700; color: #4f46e5; margin-bottom: 0.75rem; }
      .sidebar .menu { list-style: none; padding: 1.5rem 1rem; margin: 0; }
      .sidebar .menu li { margin-bottom: 0.5rem; }
      .sidebar .menu li a { display: flex; align-items: center; padding: 0.875rem 1rem; color: #6b7280; text-decoration: none; border-radius: 12px; font-weight: 500; font-size: 0.95rem; transition: all 0.3s ease; }
      .sidebar .menu li a:hover { background: #f3f4f6; color: #374151; transform: translateX(2px); }
      .sidebar .menu li a.active { background: #e0e7ff; color: #4f46e5; font-weight: 600; }
      .sidebar .menu i { width: 20px; margin-right: 0.875rem; text-align: center; font-size: 1.1rem; color: #4f46e5; }
      .sidebar .menu li a:not(.active) i { color: #6b7280; }
      .dashboard-content { flex:1; margin-left: 280px; background:#fff; border:none; border-radius:0; padding:16px; box-shadow:none; transition: all 0.3s ease; }
      .topbar { display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; }
      .menu-btn { border:1px solid #e6ecf6; background:#fff; border-radius:10px; padding:8px 12px; color:#22314a; box-shadow:0 6px 14px rgba(31,45,61,0.06); }
      .sidebar-overlay { position: fixed; inset: 0; background: rgba(17,24,39,0.35); opacity: 0; pointer-events: none; transition: opacity .2s ease; z-index: 1040; }
      .sidebar-overlay.show { opacity: 1; pointer-events: auto; }
      /* Responsive Design */
      @media (max-width: 1200px) {
        .px-40 { padding-left: 2rem; padding-right: 2rem; }
        .layout-content-container { max-width: 100%; }
      }

      @media (max-width: 992px) {
        .dashboard-content { margin-left: 0; padding: 12px; }
        .px-40 { padding-left: 1rem; padding-right: 1rem; }
        .min-w-72 { min-width: 100%; }
        .text-\[32px\] { font-size: 24px; }
      }

      @media (max-width: 768px) {
        .dashboard-layout { flex-direction: column; padding: 8px; }
        .sidebar { width: 90%; max-width: 340px; position: fixed; top: 0; left: 0; height: 100vh; transform: translateX(-105%); transition: transform .25s ease; z-index: 1050; border-radius: 0 20px 20px 0; box-shadow: 4px 0 20px rgba(0,0,0,0.15); }
        .sidebar.open { transform: translateX(0); }
        
        .dashboard-content { padding: 8px; margin-left: 0; }
        .px-40 { padding-left: 0.5rem; padding-right: 0.5rem; }
        .py-5 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
        .p-4 { padding: 0.5rem; }
        .px-4 { padding-left: 0.5rem; padding-right: 0.5rem; }
        
        .text-\[32px\] { font-size: 22px; line-height: 1.3; }
        .text-lg { font-size: 16px; }
        .text-sm { font-size: 13px; }
        
        .calendly-inline-widget {
          min-width: 100% !important;
          width: 100% !important;
          height: 550px !important;
          border-radius: 12px;
          box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .topbar {
          padding: 12px 8px;
          background: #fff;
          border-radius: 12px;
          margin-bottom: 12px;
          box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .topbar h1 {
          font-size: 1.3rem;
          font-weight: 600;
        }
        
        .menu-btn {
          padding: 10px 14px;
          border-radius: 12px;
          min-height: 44px;
          min-width: 44px;
        }
        
        .flex.flex-wrap.justify-between {
          flex-direction: column;
          gap: 1rem;
          text-align: center;
        }
        
        .layout-content-container {
          padding: 0 4px;
        }
      }

      @media (max-width: 576px) {
        .dashboard-layout { padding: 4px; }
        .dashboard-content { padding: 4px; }
        .px-40 { padding-left: 0.25rem; padding-right: 0.25rem; }
        .p-4 { padding: 0.375rem; }
        .px-4 { padding-left: 0.375rem; padding-right: 0.375rem; }
        .py-3 { padding-top: 0.375rem; padding-bottom: 0.375rem; }
        
        .text-\[32px\] { font-size: 20px; font-weight: 700; }
        .text-lg { font-size: 15px; }
        .text-sm { font-size: 12px; }
        
        .calendly-inline-widget {
          min-width: 100% !important;
          width: 100% !important;
          height: 480px !important;
          border-radius: 8px;
        }
        
        .topbar {
          flex-direction: column;
          align-items: stretch;
          gap: 10px;
          padding: 10px;
        }
        
        .topbar .d-flex {
          justify-content: center;
        }
        
        .topbar h1 {
          font-size: 1.2rem;
          text-align: center;
        }
        
        .menu-btn {
          padding: 12px 16px;
          font-size: 14px;
          min-height: 48px;
          width: 100%;
          justify-content: center;
        }
        
        .min-w-72 {
          min-width: 100%;
          text-align: center;
          padding: 0.5rem;
        }
        
        .sidebar {
          width: 95%;
          border-radius: 0 16px 16px 0;
        }
        
        .sidebar .menu li a {
          padding: 1rem 1.25rem;
          font-size: 16px;
          min-height: 48px;
        }
        
        .sidebar .menu i {
          font-size: 1.2rem;
          margin-right: 1rem;
        }
      }

      @media (max-width: 480px) {
        .text-\[32px\] { font-size: 18px; font-weight: 700; }
        .text-lg { font-size: 14px; }
        .text-sm { font-size: 11px; }
        
        .calendly-inline-widget {
          min-width: 100% !important;
          width: 100% !important;
          height: 420px !important;
          border-radius: 6px;
        }
        
        .layout-content-container {
          padding: 0;
          margin: 0;
        }
        
        .topbar {
          padding: 8px;
          margin-bottom: 8px;
        }
        
        .topbar h1 {
          font-size: 1.1rem;
        }
        
        .menu-btn {
          padding: 10px 12px;
          font-size: 13px;
          min-height: 44px;
        }
        
        .sidebar .user-block {
          padding: 1.5rem 1rem;
        }
        
        .sidebar .avatar {
          width: 40px;
          height: 40px;
          font-size: 16px;
        }
        
        .px-40 {
          padding-left: 0.125rem;
          padding-right: 0.125rem;
        }
      }
      
      /* Mobile-specific touch improvements */
      @media (max-width: 768px) {
        .menu-btn:active {
          transform: scale(0.98);
          background: #f0f4f8;
        }
        
        .sidebar .menu li a:active {
          background: #e0e7ff;
          transform: scale(0.98);
        }
        
        /* Improve tap targets */
        .sidebar .menu li a,
        .menu-btn {
          -webkit-tap-highlight-color: transparent;
          touch-action: manipulation;
        }
        
        /* Smooth scrolling for mobile */
        .layout-content-container {
          scroll-behavior: smooth;
          -webkit-overflow-scrolling: touch;
        }
      }

      /* Back button in topbar */
      .back-btn { box-shadow: 0 8px 24px rgba(31,45,61,0.12); border: none; border-radius:10px; }
    </style>
  </head>
  <body>
    <!-- Off-canvas sidebar + overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    <div class="dashboard-layout">
      <aside class="sidebar">
        <div class="user-block">
          <div class="avatar"><span id="avatar-initials">U</span></div>
          <div>
            <div id="user-name" style="font-weight:700; color:#22314a;">Account</div>
            <div id="user-email" class="text-muted" style="font-size: 12px;">Loading...</div>
          </div>
        </div>
        <ul class="menu">
          <li><a href="user-profile.html"><i class="fas fa-home"></i> Home</a></li>
          <li><a href="wallet-recharge.html"><i class="fas fa-wallet"></i> Wallet</a></li>
          <li><a href="#" onclick="openCalendly()"><i class="fas fa-phone"></i> Request for Callback</a></li>
          <li><a class="active" href="appointments.html"><i class="fas fa-calendar-alt"></i> Appointments</a></li>
          <!-- <li><a href="reviews.html"><i class="fas fa-star"></i> Reviews</a></li> -->
          <li><a href="#" onclick="startEditProfile && startEditProfile(); return false;"><i class="fas fa-cog"></i> Settings/Profile</a></li>
        </ul>
      </aside>
      <main class="dashboard-content" id="main-content">
        <div class="topbar">
          <div class="d-flex align-items-center gap-2">
            <button class="menu-btn d-inline-flex align-items-center gap-2 d-md-none" onclick="toggleSidebar()">
              <i class="fas fa-bars"></i>
              <span class="d-none d-sm-inline">Menu</span>
            </button>
            <h1 class="ms-1 ms-md-0 h4 mb-0">Appointments</h1>
          </div>
          <div>
            <button class="btn btn-light back-btn d-none d-md-inline-flex align-items-center" onclick="goBack()">
              <i class="fas fa-arrow-left me-2"></i> Back to Home
            </button>
          </div>
        </div>
        <!-- The Tailwind section below remains as the page content -->
    <div
      class="relative flex size-full min-h-screen flex-col bg-slate-50 group/design-root overflow-x-hidden"
      style="--select-button-svg: url('data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2724px%27 height=%2724px%27 fill=%27rgb(73,115,156)%27 viewBox=%270 0 256 256%27%3e%3cpath d=%27M181.66,170.34a8,8,0,0,1,0,11.32l-48,48a8,8,0,0,1-11.32,0l-48-48a8,8,0,0,1,11.32-11.32L128,212.69l42.34-42.35A8,8,0,0,1,181.66,170.34Zm-96-84.68L128,43.31l42.34,42.35a8,8,0,0,0,11.32-11.32l-48-48a8,8,0,0,0-11.32,0l-48,48A8,8,0,0,0,85.66,85.66Z%27%3e%3c/path%3e%3c/svg%3e'); font-family: Inter, &quot;Noto Sans&quot;, sans-serif;"
    >
      <div class="layout-container flex h-full grow flex-col">
        <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#e7edf4] px-10 py-3">
          <div class="flex items-center gap-4 text-[#0d141c]">
            <div class="size-4">
              <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M42.4379 44C42.4379 44 36.0744 33.9038 41.1692 24C46.8624 12.9336 42.2078 4 42.2078 4L7.01134 4C7.01134 4 11.6577 12.932 5.96912 23.9969C0.876273 33.9029 7.27094 44 7.27094 44L42.4379 44Z"
                  fill="currentColor"
                ></path>
              </svg>
            </div>
            <h2 class="text-[#0d141c] text-lg font-bold leading-tight tracking-[-0.015em]">Cosmic Insights</h2>
          </div>
          <div class="flex flex-1 justify-end gap-8">
            <div class="flex items-center gap-9">
              <a class="text-[#0d141c] text-sm font-medium leading-normal" href="#">Daily Horoscope</a>
              <a class="text-[#0d141c] text-sm font-medium leading-normal" href="#">Live</a>
              <a class="text-[#0d141c] text-sm font-medium leading-normal" href="#">Talk to Astrologer</a>
              <a class="text-[#0d141c] text-sm font-medium leading-normal" href="#">Reports</a>
              <a class="text-[#0d141c] text-sm font-medium leading-normal" href="#">Kundli</a>
            </div>
            <button
              class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 bg-[#e7edf4] text-[#0d141c] gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5"
            >
              <div class="text-[#0d141c]" data-icon="Bell" data-size="20px" data-weight="regular">
                <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor" viewBox="0 0 256 256">
                  <path
                    d="M221.8,175.94C216.25,166.38,208,139.33,208,104a80,80,0,1,0-160,0c0,35.34-8.26,62.38-13.81,71.94A16,16,0,0,0,48,200H88.81a40,40,0,0,0,78.38,0H208a16,16,0,0,0,13.8-24.06ZM128,216a24,24,0,0,1-22.62-16h45.24A24,24,0,0,1,128,216ZM48,184c7.7-13.24,16-43.92,16-80a64,64,0,1,1,128,0c0,36.05,8.28,66.73,16,80Z"
                  ></path>
                </svg>
              </div>
            </button>
            <div
              class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10"
              style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuCVclZk-33x3Eo5QDgZ-ZceLryMHjfqtrCGgvd3m36LlSEkQ-N7XZWuztioiIy_ZKOer06WNW6XaMYkSVFbVRul7DppGDN_9Spam5wAKD3165BmKAjtWcAvt8HnJGexuhRDm7oKQxm-cKa2ovogAQPDJzcmJjSbDyYKX8XjVJPlP5zX-4ZiQP7TgBaXykmtlpM2G3qUa2oMCQGZyljqPIuvB_51G3gq7TwLL5IkHlSvR03944NuwjYXYLCNqpreVgBBk7bS-TZafwU");'
            ></div>
          </div>
        </header>
        <div class="px-40 flex flex-1 justify-center py-5" style="padding-top: 0.5rem; padding-bottom: 0.5rem;">
          <div class="layout-content-container flex flex-col max-w-[960px] flex-1">
            <div class="flex flex-wrap justify-between gap-3 p-4">
              <div class="flex min-w-72 flex-col gap-3">
                <p class="text-[#0d141c] tracking-light text-[32px] font-bold leading-tight">Appointments</p>
                <p class="text-[#49739c] text-sm font-normal leading-normal">Book an appointment with our expert astrologers for personalized guidance.</p>
              </div>
            </div>
            <h3 class="text-[#0d141c] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4">Book an Appointment</h3>
            
            <!-- Calendly inline widget begin -->
            <div class="px-4 py-3">
              <div class="calendly-inline-widget" data-url="https://calendly.com/bitvallysoftwere/appointment?background_color=f5f5f5" style="min-width:320px;height:700px;border-radius:12px;overflow:hidden;"></div>
              <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
            </div>
            <!-- Calendly inline widget end -->
          </div>
        </div>
      </div>
    </div>
        </main>
      </div>
    <script>
      // Populate sidebar user info from localStorage (match user-profile)
      function getInitials(nameOrEmail) {
        if (!nameOrEmail) return 'U';
        const str = String(nameOrEmail).trim();
        if (str.includes(' ')) { const parts = str.split(/\s+/).slice(0, 2); return parts.map(p => p[0]).join('').toUpperCase(); }
        if (str.includes('@')) return str[0].toUpperCase();
        return str.slice(0, 2).toUpperCase();
      }
      function setAvatarInitials(text) {
        const el = document.getElementById('avatar-initials');
        if (el) el.textContent = getInitials(text);
      }
      document.addEventListener('DOMContentLoaded', () => {
        const user = JSON.parse(localStorage.getItem('user') || '{}');
        if (user) {
          const nameEl = document.getElementById('user-name');
          const emailEl = document.getElementById('user-email');
          if (nameEl) nameEl.textContent = user.name || 'User';
          if (emailEl) emailEl.textContent = user.email || '';
          setAvatarInitials(user.name || user.email || 'U');
        }
      });

      // Sidebar controls (match user-profile behavior)
      const sidebar = document.querySelector('.sidebar');
      const overlay = document.getElementById('sidebarOverlay');
      function openSidebar() {
        if (!sidebar) return;
        sidebar.classList.add('open');
        if (overlay) overlay.classList.add('show');
        document.body.style.overflow = 'hidden';
      }
      function closeSidebar() {
        if (!sidebar) return;
        sidebar.classList.remove('open');
        if (overlay) overlay.classList.remove('show');
        document.body.style.overflow = '';
      }
      function toggleSidebar() {
        if (!sidebar) return;
        if (sidebar.classList.contains('open')) closeSidebar(); else openSidebar();
      }
      if (overlay) overlay.addEventListener('click', closeSidebar);
      document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeSidebar(); });

      // Back navigation
      function goBack() {
        window.location.href = 'index.html';
      }

      // Calendly function for Request for Callback
      function openCalendly() {
        if (window.Calendly && typeof Calendly.initPopupWidget === 'function') {
          Calendly.initPopupWidget({
            url: 'https://calendly.com/bitvallysoftwere/new-meeting?background_color=f0efef'
          });
          return false;
        }
        // Fallback: open in new tab if widget not loaded yet
        window.open('https://calendly.com/bitvallysoftwere/new-meeting?background_color=f0efef', '_blank', 'noopener');
        return false;
      }
      // Edit profile flow
      function startEditProfile() {
            const name = document.getElementById('user-name').textContent || '';
            const email = document.getElementById('user-email').textContent || '';
            const stored = JSON.parse(localStorage.getItem('user') || '{}');
            const contact = stored.contact || '';

            const main = document.getElementById('main-content');
            main.innerHTML = `
                <div class="section-title">Edit Profile</div>
                <form id="editProfileForm" class="row g-3">
                    <div class="col-12">
                        <label class="form-label">Full Name</label>
                        <input type="text" class="form-control" id="editName" value="${name}" minlength="2" required />
                    </div>
                    <div class="col-12">
                        <label class="form-label">Email (read-only)</label>
                        <input type="email" class="form-control" id="editEmail" value="${email}" readonly />
                    </div>
                    <div class="col-12">
                        <label class="form-label">Contact</label>
                        <input type="tel" class="form-control" id="editContact" value="${contact}" pattern="^[0-9]{10}$" placeholder="10-digit number" required />
                        <div class="form-text">Use a 10-digit phone number.</div>
                    </div>
                    <div class="col-12 d-grid d-sm-flex gap-2 mt-2">
                        <button type="button" class="btn btn-primary flex-fill" onclick="saveProfile()"><i class="fas fa-save me-2"></i>Save Changes</button>
                        <button type="button" class="btn btn-outline-secondary flex-fill" onclick="cancelEditProfile()"><i class="fas fa-times me-2"></i>Cancel</button>
                    </div>
                </form>
            `;
        }
    </script>
  </body>
</html>
